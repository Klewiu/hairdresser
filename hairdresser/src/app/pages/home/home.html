<!-- Full Page Spinner Loader -->
@if (isLoading) {
  <div
    [ngClass]="{'fade-out': !isLoading}"
    class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-white"
  >
    <!-- Spinner -->
    <div
      class="w-12 h-12 border-4 border-[#b48b6a] border-t-transparent rounded-full animate-spin mb-4"
    ></div>

    <!-- Loading Text -->
    <p class="text-[#b48b6a] font-semibold text-lg tracking-widest">
      ...
    </p>
  </div>
}

<!-- SLIDER IS HOME -->
<app-slider id="home"></app-slider>

<!-- ABOUT SECTION -->
<section id="o nas" class="h-screen relative mt-1 reveal-wrap">
  <img src="brush.webp" alt="Brush" class="absolute inset-0 w-full h-full object-cover">
  <div class="absolute inset-0 bg-black bg-opacity-40 flex flex-col justify-center px-4
              text-center md:text-left md:items-start items-center">
    
    <!-- Nagłówek -->
    <h2 class="text-3xl md:ml-5 md:text-6xl font-bold text-white drop-shadow-lg uppercase text-center md:text-right" 
        data-sr="fade-up" data-sr-delay="0">
      HAIR TOUCH
    </h2>
    
    <!-- Akapit -->
    <p class="mt-5 md:ml-5 md:text-2xl text-white max-w-4xl drop-shadow-md leading-relaxed 
              text-lg text-center md:text-left">
      
      to salon fryzjerski z wyjątkowym klimatem i ciepłą, przyjazną atmosferą, w którym każdy klient poczuje się zaopiekowany. 
      
      Oferujemy usługi na najwyższym poziomie, z pełnym zaangażowaniem i indywidualnym podejściem. Zawsze poświęcamy czas na dokładną konsultację i uważnie słuchamy Twoich potrzeb, aby dobrać idealną fryzurę i zadbać o kondycję Twoich włosów. 
      Podczas wizyty zrelaksujesz się przy pysznej kawie i dobrej muzyce, a my zadbamy o każdy szczegół Twojej stylizacji.
    </p>
    
  </div>
</section>


<!-- USŁUGI -->
<section id="usługi"
         class="relative min-h-screen bg-center bg-cover flex items-center justify-center px-4 py-12"
         style="background-image: url('/gear.webp')">

  <!-- darker overlay + vignette for stronger dim -->
  <div class="absolute inset-0 bg-black/70"></div>
  <div class="pointer-events-none absolute inset-0
              bg-[radial-gradient(120%_80%_at_50%_40%,transparent_0%,transparent_55%,rgba(0,0,0,0.35)_100%)]"></div>

  <!-- cards wrapper -->
  <div class="relative z-10 w-full max-w-6xl flex flex-col gap-8">
    <!-- First row (3 cards) -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      @for (card of serviceCards.slice(0,3); track card.id; let i = $index) {
        <!-- OUTER: SR owns transform/opacity; also acts as the hover group -->
        <button
          (click)="openModal(card.id)"
          class="group relative block" 
          data-sr="fade-up"
          [attr.data-sr-delay]="i * 120"
        >
          <!-- INNER: hover/active scale lives here, so it won't conflict with SR -->
          <div class="relative overflow-hidden rounded-2xl shadow-lg
                      transition-transform duration-300 will-change-transform
                      group-hover:scale-[1.02] group-active:scale-[0.98]">
            <img [src]="card.img" [alt]="card.label" class="h-64 w-full object-cover" />
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"></div>
            <span class="absolute bottom-4 left-4 text-white text-xl font-bold drop-shadow">
              {{ card.label }}
            </span>
          </div>
        </button>
      }
    </div>

    <!-- Second row (2 cards) -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 lg:grid-cols-2">
      @for (card of serviceCards.slice(3); track card.id; let i = $index) {
        <button
          (click)="openModal(card.id)"
          class="group relative block"
          data-sr="fade-up"
          [attr.data-sr-delay]="(i + 3) * 120"
        >
          <div class="relative overflow-hidden rounded-2xl shadow-lg
                      transition-transform duration-300 will-change-transform
                      group-hover:scale-[1.02] group-active:scale-[0.98]">
            <img [src]="card.img" [alt]="card.label" class="h-64 w-full object-cover" />
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"></div>
            <span class="absolute bottom-4 left-4 text-white text-xl font-bold drop-shadow">
              {{ card.label }}
            </span>
          </div>
        </button>
      }
    </div>
  </div>
</section>

<!-- MODAL -->
@if (isModalOpen) {
  <div
    class="fixed inset-0 z-50 flex items-start md:items-center justify-center"
    role="dialog"
    aria-modal="true"
  >
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/70" (click)="closeModal()"></div>

    <!-- Background image only on md+ -->
    <div class="absolute inset-0 hidden md:block" aria-hidden="true">
      <img [src]="modalBgUrl" alt="" class="w-full h-full object-cover" />
    </div>

    <!-- Card -->
    <article
      class="relative z-10 w-full max-w-3xl mx-4 sm:mx-6 md:mx-8
             bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl text-gray-900
             px-5 sm:px-6 md:px-8 pr-10 md:pr-12 py-6 md:py-8
             mt-6 sm:mt-8 md:mt-0
             max-h-[85vh] overflow-y-auto"
    >
      <!-- Close button -->
      <button
        class="absolute top-3 right-3 md:top-4 md:right-4
               text-pink-600 hover:text-pink-500 active:text-pink-700
               text-3xl md:text-4xl leading-none
               focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-500/40 rounded"
        (click)="closeModal()"
        [attr.aria-label]="'Zamknij modal'"
      >
        ×
      </button>

      <!-- Title & text -->
      <h3 class="font-bold text-2xl sm:text-3xl md:text-4xl mb-3 md:mb-4">
        {{ currentModalCard?.label }}
      </h3>

      <p class="text-base sm:text-lg md:text-xl leading-relaxed">
        {{ currentModalCard?.longdescr }}
      </p>
    </article>
  </div>
}



<!-- CENNIK SECTION -->
<section
  id="cennik"
  class="relative min-h-screen scroll-mt-24 bg-[url('/scissors.webp')] bg-cover bg-center bg-fixed"
>
  <!-- Dark overlay -->
  <div class="absolute inset-0 bg-black/40"></div>

  <!-- Content wrapper (anchored at top) -->
  <div class="relative z-10 flex flex-col items-center justify-start px-4 pt-16 pb-16 md:pt-20 lg:pt-24">
    <h2 class="text-4xl md:text-5xl font-bold text-white drop-shadow-lg text-center">
      Cennik
    </h2>

    <p
      class="mt-4 text-white/90 max-w-3xl drop-shadow-md text-center"
      data-sr="fade-up"
      data-sr-delay="200"
    >
      Poniżej znajdziesz orientacyjny cennik naszych usług. Dokładna wycena zostanie ustalona podczas darmowej konsultacji, z uwzględnieniem indywidualnych potrzeb i kondycji Twoich włosów.
      Jeśli chcesz poznać szczegółowe ceny i ofertę, zapraszamy do kontaktu lub 
      <a 
        href="https://booksy.com/pl-pl/dl/show-business/294506?utm_medium=c2c_referral" 
        target="_blank" 
        rel="noopener noreferrer"
        class="inline-block px-3 py-1.5 text-sm rounded-full bg-pink-600 text-white font-medium shadow hover:bg-pink-700 focus:outline-none focus:ring-1 focus:ring-pink-400 transition"
      >
        REJESTRACJI ONLINE
      </a>
    </p>

    <!-- Pricing card -->
    <div class="mt-10 w-full max-w-6xl bg-white/95 backdrop-blur rounded-2xl shadow-xl overflow-hidden">
      <div class="lg:flex items-stretch">
        <!-- Left intro -->
        <div class="lg:w-5/12 w-full p-6 md:p-10">
          <h3 class="mt-2 text-3xl md:text-4xl font-bold leading-tight text-gray-800 text-center lg:text-left">
            Nasze Ceny
          </h3>
          <p class="mt-4 text-gray-600 text-center lg:text-left">
            Sprawdź przykładowe warianty z naszej oferty i dopasuj usługę do swoich potrzeb.
          </p>

          <div class="mt-3 h-px bg-gray-100"></div>
          <div class="mt-3 flex flex-wrap gap-2"></div>
        </div>

        <!-- Right: Content area -->
        <div class="lg:w-7/12 w-full border-t lg:border-t-0 lg:border-l border-gray-100">
          <div class="flex">
            <!-- Desktop: single tab content -->
            <div class="hidden lg:block flex-1 p-6 md:p-10">
              <h4 class="text-2xl font-semibold text-gray-800">
                {{ currentTab?.label }}
              </h4>
              <p class="mt-2 text-gray-600">
                {{ currentTab?.description }}
              </p>

              <!-- Price list -->
              <div class="mt-6 space-y-3">
                @for (item of (currentTab?.items ?? []); track item.name) {
                  <div class="flex items-start justify-between rounded-xl border border-gray-100 bg-white p-4">
                    <div class="pr-4">
                      <div class="font-medium text-gray-900">
                        {{ item.name }}
                      </div>
                      @if (item.note) {
                        <div class="text-sm text-gray-500">
                          {{ item.note }}
                        </div>
                      }
                    </div>
                    <div class="text-right">
                      <div class="font-semibold text-[#9a7355]">
                        {{ item.price }}
                      </div>
                    </div>
                  </div>
                }
              </div>

              <!-- CTA / info -->
              <div class="mt-8 flex flex-wrap items-center gap-3">
                <span class="text-sm text-gray-600 italic">
                  Ceny mogą ulec zmianie po konsultacji.
                </span>
              </div>
            </div>

            <!-- Mobile: show ALL categories stacked -->
            <div class="lg:hidden flex-1 p-6 md:p-15 space-y-10">
              @for (t of tabs; track t.id) {
                <div>
                  <h4 class="text-2xl font-semibold text-gray-800">
                    {{ t.label }}
                  </h4>
                  <p class="mt-2 text-gray-600">
                    {{ t.description }}
                  </p>

                  <div class="mt-4 space-y-3">
                    @for (item of t.items; track item.name) {
                      <div class="flex items-start justify-between rounded-xl border border-gray-100 bg-white p-4">
                        <div class="pr-4">
                          <div class="font-medium text-gray-900">
                            {{ item.name }}
                          </div>
                          @if (item.note) {
                            <div class="text-sm text-gray-500">
                              {{ item.note }}
                            </div>
                          }
                        </div>
                        <div class="text-right">
                          <div class="font-semibold text-[#9a7355]">
                            {{ item.price }}
                          </div>
                        </div>
                      </div>
                    }
                  </div>
                </div>
              }

              <!-- CTA / info (mobile) -->
              <div class="pt-2">
                <span class="ml-3 text-sm text-gray-600 italic">
                  Ceny mogą ulec zmianie po konsultacji.
                </span>
              </div>
            </div>

            <!-- Desktop vertical tabs -->
            <div class="hidden lg:flex w-52 border-l border-gray-100">
              <div class="flex flex-col w-full gap-2 p-4">
                @for (t of tabs; track t.id) {
                  <button
                    (click)="activeTab = t.id"
                    class="relative w-full text-left px-5 py-3 rounded-2xl transition-all duration-200 ease-out
                           focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#9a7355]/40"
                    [ngClass]="{
                      'bg-gray-800 text-white font-medium shadow-lg ring-1 ring-black/10 scale-[1.01]': activeTab === t.id,
                      'bg-gray-100 text-gray-700 hover:bg-gray-200/80 hover:shadow hover:translate-x-0.5 active:scale-[0.99]': activeTab !== t.id
                    }"
                  >
                    {{ t.label }}
                  </button>
                }
              </div>
            </div>
          </div> <!-- /flex -->
        </div>
      </div>
    </div>
  </div>
</section>


<!-- CONTACT SECTION -->
<section id="kontakt" class="min-h-screen bg-gray-100 flex flex-col items-center justify-center px-4 py-10 text-center reveal-wrap">
  <h2 class="text-4xl font-bold mb-4" data-sr="fade-up" data-sr-delay="0">
    Hair Touch – Marlena Walenda
  </h2>

  <p class="text-gray-700 mb-2" data-sr="fade-up" data-sr-delay="100">
    Ulica gen. Stanisława Skalskiego 1/lok.U15, 03-982 Warszawa
  </p>

  <p class="text-gray-700 mt-4" data-sr="fade-up" data-sr-delay="300">
    Telefon: <a href="tel:533230799" class="text-[#9a7355] hover:underline">533 230 799</a>
  </p>

  <p class="text-gray-700 mt-4 mb-6" data-sr="fade-up" data-sr-delay="400">
    Email: <a href="mailto:kontakt&#64;hairtouch.pl" class="text-[#9a7355] hover:underline">kontakt&#64;hairtouch.pl</a>
  </p>

  <div class="flex space-x-6 mt-4 justify-center" data-sr="fade-up" data-sr-delay="400">
    <!-- Instagram -->
    <a href="https://www.instagram.com/hairtouch.pl" target="_blank" aria-label="Instagram" class="text-gray-600 hover:text-pink-500">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-8 h-8" viewBox="0 0 24 24">
        <path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2Zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5ZM12 7a5 5 0 1 1 0 10a5 5 0 0 1 0-10Zm0 1.5a3.5 3.5 0 1 0 0 7a3.5 3.5 0 0 0 0-7Zm4.75-.88a1.13 1.13 0 1 1-2.26 0a1.13 1.13 0 0 1 2.26 0Z"/>
      </svg>
    </a>

    <!-- Facebook -->
    <a href="https://www.facebook.com/hairtouchpl/" target="_blank" aria-label="Facebook" class="text-gray-600 hover:text-blue-600">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-8 h-8" viewBox="0 0 24 24">
        <path d="M22 12a10 10 0 1 0-11.5 9.9v-7h-2v-3h2v-2.3c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2V12h2.2l-.4 3h-1.8v7A10 10 0 0 0 22 12Z"/>
      </svg>
    </a>

      <!-- Booksy -->
    <a href="https://booksy.com/pl-pl/dl/show-business/294506?utm_medium=c2c_referral" 
      target="_blank" aria-label="Booksy" class="booksy-link">
      <img src="/booksy.svg" alt="Booksy Logo" class="booksy-icon" />
    </a>
    


  </div>
</section>
